<form #registerForm="ngForm" (ngSubmit)="processRegistration(registerForm)">
    <mat-dialog-content class="shadow-lg bg-secondary text-light">
        <header>
            <p class="fs-4">Register</p>
            <hr />
        </header>
        <div class="container-fluid m-0 p-0">
            <div class="row">
                <div class="col-md-6">
                    <mat-form-field class="w-100">
                        <mat-label>First Name</mat-label>
                        <mat-icon matPrefix>person</mat-icon>
                        <input matInput 
                            [(ngModel)]="registerModel.firstName" 
                            #firstName="ngModel" 
                            name="firstName"
                            type="text" 
                            placeholder="John" 
                            [errorStateMatcher]="errorMatcher">
                        @if (firstNameFormControl.hasError('required')) {
                            <mat-error class="pb-1">First Name is required</mat-error>
                        }
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="w-100">
                        <mat-label>Last Name</mat-label>
                        <mat-icon matPrefix>person</mat-icon>
                        <input class="w-100" matInput 
                            [(ngModel)]="registerModel.lastName" 
                            name="lastName"
                            #lastName="ngModel"
                            type="text" 
                            placeholder="Doe" 
                            [errorStateMatcher]="errorMatcher">
                        @if (lastNameFormControl.hasError('required')) {
                            <mat-error class="pb-1">Last Name is required</mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <mat-form-field class="w-100">
                        <mat-icon matPrefix>person</mat-icon>
                        <input matInput 
                            [(ngModel)]="registerModel.middleName" 
                            name="middleName"
                            #middleName="ngModel"
                            type="text" 
                            placeholder="Middle Name">
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="w-100">
                        <mat-icon matPrefix>drafts</mat-icon>
                        <mat-label>Email</mat-label>
                        <input class="w-100" matInput 
                            [(ngModel)]="registerModel.emailAddress" 
                            type="email"
                            #emailAddress="ngModel"
                            name="emailAddress" 
                            placeholder="example@email.com" 
                            [errorStateMatcher]="errorMatcher">
                        @if (emailFormControl.hasError('email') && !emailFormControl.hasError('required')) {
                            <mat-error>Please enter a valid email address</mat-error>
                          }
                        @if (emailFormControl.hasError('required')) {
                            <mat-error>Email is required</mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <mat-form-field class="w-100">
                        <mat-label>Password</mat-label>
                        <mat-icon matPrefix>lock</mat-icon>
                        <input matInput 
                            [(ngModel)]="registerModel.password" 
                            #password="ngModel" 
                            name="password" 
                            type="password" 
                            placeholder="Password" 
                            [errorStateMatcher]="errorMatcher">
                        @if (passwordFormControl.hasError('required')) {
                            <mat-error>Password is required</mat-error>
                        }
                        @if(passwordFormControl.hasError('passwordStrength') && !passwordFormControl.hasError('required')){
                            <mat-error>Weak password</mat-error>
                        }
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="w-100">
                        <mat-label>Confirm Password</mat-label>
                        <mat-icon matPrefix>lock</mat-icon>
                        <input class="w-100" 
                            matInput 
                            [(ngModel)]="registerModel.confirmPassword" 
                            #confirmPassword="ngModel" 
                            name="confirmPassword" 
                            type="password" 
                            placeholder="Confirm Password" 
                            [errorStateMatcher]="errorMatcher">
                        @if (cPasswordFormControl.hasError('required')) {
                            <mat-error>Confirm Password is required</mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row mb-0 pb-0">
                <div class="col-md-7 mb-0 pb-0">
                    <mat-form-field class="w-100">
                        <mat-label>Phone Number</mat-label>
                        <mat-icon matPrefix>phone</mat-icon>
                        <input matInput 
                            type="tel" 
                            [(ngModel)]="registerModel.phoneNumber" 
                            name="phoneNumber"
                            #phoneNumber="ngModel" 
                            placeholder="+2348012345678">
                    </mat-form-field>
                </div>
                <div class="col-md-5 mb-0 pb-0">
                    <mat-form-field class="w-100">
                        <mat-label>Gender</mat-label>
                        <mat-select 
                            [(value)]="registerModel.gender"
                            name="gender"
                            [(ngModel)]="registerModel.gender" 
                            #gender="ngModel">
                            @for (option of options; track option) {
                                <mat-option [value]="option.value">{{option.label}}</mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <span>
                <p class="linked text-info pb-2 m-0" (click)="openLoginDialog()">Have have an account?</p>
            </span>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions align="center" class="shadow-lg bg-secondary">
        <button mat-raised-button class="bg-primary text-light my-1">Register</button>
        <button mat-raised-button mat-dialog-close class="bg-dark text-light my-1">Cancel</button>
    </mat-dialog-actions>
</form>